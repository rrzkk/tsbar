!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="http://localhost:8080/",n(n.s=0)}([function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function u(e){try{a(r.next(e))}catch(e){s(e)}}function i(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,i)}a((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(1)),u=o(n(2)),i=o(n(3)),a=o(n(4)),d=o(n(7)),c=n(8),l=s.default();l.use(u.default.json());const f=new c.Pool({user:"postgres",host:"54.252.209.243",database:"postgres",password:"zhekun",port:5432});l.use(d.default()),l.get("/",(e,t)=>{t.send("Hello world!")}),l.get("/api/test",(e,t)=>{t.send("test success")}),l.post("/api/trasfersecret2",(e,t)=>r(void 0,void 0,void 0,(function*(){const n=e.body.data,r=i.default.create_UUID(),o={secret:n,guid:r};t.send(r);const s=yield a.default.jsonreadall();a.default.jsonwrite(s,o)}))),l.get("/api/getsecret",(e,t)=>r(void 0,void 0,void 0,(function*(){const n=e.query.guid.toString(),r=yield a.default.jsonread(n);t.send(r),a.default.jsondelete(n)}))),l.get("/api/psgl/test",(e,t)=>{f.query("SELECT * FROM you_guess",(e,n)=>{t.send(n)})}),l.post("/api/psgl/testpost",(e,t)=>{f.query("INSERT INTO you_guess (column_1) VALUES (45)",(e,n)=>{t.status(210).send("num added with: "+n)})}),l.get("/api/psgl/getsecret",(e,t)=>{const n=e.query.guid.toString();f.query("SELECT * FROM secrets WHERE guids=$1",[n],(e,r)=>{0!==r.rows.length?(t.send(r.rows[0].secrets+r.rows.length),f.query("DELETE FROM secrets WHERE guids = $1",[n],(e,t)=>{if(e)throw e})):t.send("The secret is already burnt!")})}),l.post("/api/psgl/postsecret",(e,t)=>{const n=e.body.data,r=i.default.create_UUID();t.send(r),f.query("INSERT INTO secrets (secrets,guids) VALUES ($1,$2)",[n,r],(e,t)=>{if(e)throw e})});const p=l.listen(8080,()=>{});t.default={app:l,server:p}},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("body-parser")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={create_UUID(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}}},function(e,t,n){"use strict";(function(e){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function u(e){try{a(r.next(e))}catch(e){s(e)}}function i(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,i)}a((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(5)),u=o(n(6));t.default={jsonwrite(t,n){const r=JSON.stringify(t.concat(n));console.log("write"),s.default.writeFileSync(u.default.join(e,"guiddata.json"),r)},jsonread(e){return r(this,void 0,void 0,(function*(){const t=this.jsonreadall().filter(t=>t.guid===e);return 0!==t.length?t[0].secret.toString():"The secret is already burnt!"}))},jsonreadall(){let t;s.default.existsSync(u.default.join(e,"guiddata.json"))?t=s.default.readFileSync(u.default.join(e,"guiddata.json")).toString():(s.default.writeFileSync(u.default.join(e,"guiddata.json"),"[]"),t="[]");return JSON.parse(t)},jsondelete(t){const n=this.jsonreadall().filter(e=>e.guid!==t),r=JSON.stringify(n);s.default.writeFileSync(u.default.join(e,"guiddata.json"),r)}}}).call(this,"/")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("pg")}]);